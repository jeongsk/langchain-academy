/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var k=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var z=Object.prototype.hasOwnProperty;var j=(F,T)=>{for(var e in T)k(F,e,{get:T[e],enumerable:!0})},$=(F,T,e,t)=>{if(T&&typeof T=="object"||typeof T=="function")for(let i of R(T))!z.call(F,i)&&i!==e&&k(F,i,{get:()=>T[i],enumerable:!(t=O(T,i))||t.enumerable});return F};var _=F=>$(k({},"__esModule",{value:!0}),F);var W={};j(W,{default:()=>V});module.exports=_(W);var r=require("obsidian"),h=require("obsidian"),H={maxNotesToShow:100,showMarkdownFiles:!0,showImageFiles:!0,showPDFFiles:!0,showAudioFiles:!0,showVideoFiles:!0,showCanvasFiles:!0,showCSVFiles:!0,showBaseFiles:!0,excludedFolders:[],excludedFiles:[],excludedTags:[],previewLines:1,showTime:!0,pinnedNotes:[],dateFormat:"DD/MM/YYYY",propertyModified:"",density:"comfortable",openInNewTab:"new"},L={en:{recentNotes:"Recent notes",pinned:"Pinned",deleteFile:"Delete file",areYouSureDelete:'Are you sure you want to delete "{filename}"?',delete:"Delete",cancel:"Cancel",open:"Open",openInNewTab:"Open in new tab",moveToPrevious:"Move to previous note",moveToNext:"Move to next note",today:"Today",yesterday:"Yesterday",previous7days:"Previous 7 days",previous30days:"Previous 30 days",daysago:"days ago",density:"Density",comfortable:"Comfortable",compact:"Compact",densityDesc:"Choose between comfortable (default) or compact display"},pl:{recentNotes:"Ostatnie notatki",pinned:"Przypi\u0119te",deleteFile:"Usu\u0144 plik",areYouSureDelete:'Czy na pewno chcesz usun\u0105\u0107 "{filename}"?',delete:"Usu\u0144",cancel:"Anuluj",open:"Otw\xF3rz",openInNewTab:"Otw\xF3rz w nowej karcie",moveToPrevious:"Przejd\u017A do poprzedniej notatki",moveToNext:"Przejd\u017A do nast\u0119pnej notatki",today:"Dzisiaj",yesterday:"Wczoraj",previous7days:"Poprzednie 7 dni",previous30days:"Poprzednie 30 dni",daysago:"dni temu"},es:{recentNotes:"Notas recientes",pinned:"Fijadas",deleteFile:"Eliminar archivo",areYouSureDelete:'\xBFEst\xE1s seguro de que quieres eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",openInNewTab:"Abrir en nueva pesta\xF1a",moveToPrevious:"Ir a la nota anterior",moveToNext:"Ir a la siguiente nota",today:"Hoy",yesterday:"Ayer",previous7days:"\xDAltimos 7 d\xEDas",previous30days:"\xDAltimos 30 d\xEDas",daysago:"d\xEDas atr\xE1s"},fr:{recentNotes:"Notes r\xE9centes",pinned:"\xC9pingl\xE9es",deleteFile:"Supprimer le fichier",areYouSureDelete:'\xCAtes-vous s\xFBr de vouloir supprimer "{filename}" ?',delete:"Supprimer",cancel:"Annuler",open:"Ouvrir",openInNewTab:"Ouvrir dans un nouvel onglet",moveToPrevious:"Aller \xE0 la note pr\xE9c\xE9dente",moveToNext:"Aller \xE0 la note suivante",today:"Aujourd'hui",yesterday:"Hier",previous7days:"7 derniers jours",previous30days:"30 derniers jours",daysago:"jours"},de:{recentNotes:"Aktuelle Notizen",pinned:"Angeheftet",deleteFile:"Datei l\xF6schen",areYouSureDelete:'M\xF6chten Sie "{filename}" wirklich l\xF6schen?',delete:"L\xF6schen",cancel:"Abbrechen",open:"\xD6ffnen",openInNewTab:"In neuem Tab \xF6ffnen",moveToPrevious:"Zur vorherigen Notiz",moveToNext:"Zur n\xE4chsten Notiz",today:"Heute",yesterday:"Gestern",previous7days:"Letzte 7 Tage",previous30days:"Letzte 30 Tage",daysago:"Tage her"},it:{recentNotes:"Note recenti",pinned:"Appuntate",deleteFile:"Elimina file",areYouSureDelete:'Sei sicuro di voler eliminare "{filename}"?',delete:"Elimina",cancel:"Annulla",open:"Apri",openInNewTab:"Apri in nuova scheda",moveToPrevious:"Vai alla nota precedente",moveToNext:"Vai alla nota successiva",today:"Oggi",yesterday:"Ieri",previous7days:"Ultimi 7 giorni",previous30days:"Ultimi 30 giorni",daysago:"giorni fa"},ja:{recentNotes:"\u6700\u8FD1\u306E\u30CE\u30FC\u30C8",pinned:"\u56FA\u5B9A\u6E08\u307F",deleteFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664",areYouSureDelete:'"{filename}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F',delete:"\u524A\u9664",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",open:"\u958B\u304F",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",moveToPrevious:"\u524D\u306E\u30CE\u30FC\u30C8\u3078",moveToNext:"\u6B21\u306E\u30CE\u30FC\u30C8\u3078",today:"\u4ECA\u65E5",yesterday:"\u6628\u65E5",previous7days:"\u904E\u53BB7\u65E5\u9593",previous30days:"\u904E\u53BB30\u65E5\u9593",daysago:"\u65E5\u524D"},ko:{recentNotes:"\uCD5C\uADFC \uB178\uD2B8",pinned:"\uACE0\uC815\uB428",deleteFile:"\uD30C\uC77C \uC0AD\uC81C",areYouSureDelete:'"{filename}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?',delete:"\uC0AD\uC81C",cancel:"\uCDE8\uC18C",open:"\uC5F4\uAE30",openInNewTab:"\uC0C8 \uD0ED\uC5D0\uC11C \uC5F4\uAE30",moveToPrevious:"\uC774\uC804 \uB178\uD2B8\uB85C",moveToNext:"\uB2E4\uC74C \uB178\uD2B8\uB85C",today:"\uC624\uB298",yesterday:"\uC5B4\uC81C",previous7days:"\uC9C0\uB09C 7\uC77C",previous30days:"\uC9C0\uB09C 30\uC77C",daysago:"\uC77C \uC804"},zh:{recentNotes:"\u6700\u8FD1\u7B14\u8BB0",pinned:"\u5DF2\u7F6E\u9876",deleteFile:"\u5220\u9664\u6587\u4EF6",areYouSureDelete:'\u786E\u5B9A\u8981\u5220\u9664"{filename}"\u5417\uFF1F',delete:"\u5220\u9664",cancel:"\u53D6\u6D88",open:"\u6253\u5F00",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",moveToPrevious:"\u79FB\u81F3\u4E0A\u4E00\u4E2A\u7B14\u8BB0",moveToNext:"\u79FB\u81F3\u4E0B\u4E00\u4E2A\u7B14\u8BB0",today:"\u4ECA\u5929",yesterday:"\u6628\u5929",previous7days:"\u6700\u8FD17\u5929",previous30days:"\u6700\u8FD130\u5929",daysago:"\u5929\u524D"},ru:{recentNotes:"\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",pinned:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0451\u043D\u043D\u044B\u0435",deleteFile:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B",areYouSureDelete:'\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C "{filename}"?',delete:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",open:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",openInNewTab:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043D\u043E\u0432\u043E\u0439 \u0432\u043A\u043B\u0430\u0434\u043A\u0435",moveToPrevious:"\u041A \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",moveToNext:"\u041A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0435",today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",yesterday:"\u0412\u0447\u0435\u0440\u0430",previous7days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 7 \u0434\u043D\u0435\u0439",previous30days:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 30 \u0434\u043D\u0435\u0439",daysago:"\u0434\u043D\u0435\u0439 \u043D\u0430\u0437\u0430\u0434"},pt:{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Eliminar ficheiro",areYouSureDelete:'Tem a certeza que pretende eliminar "{filename}"?',delete:"Eliminar",cancel:"Cancelar",open:"Abrir",openInNewTab:"Abrir em novo separador",moveToPrevious:"Ir para a nota anterior",moveToNext:"Ir para a pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias",daysago:"dias atr\xE1s"},"pt-br":{recentNotes:"Notas recentes",pinned:"Fixadas",deleteFile:"Excluir arquivo",areYouSureDelete:'Tem certeza que deseja excluir "{filename}"?',delete:"Excluir",cancel:"Cancelar",open:"Abrir",openInNewTab:"Abrir em nova aba",moveToPrevious:"Ir para nota anterior",moveToNext:"Ir para pr\xF3xima nota",today:"Hoje",yesterday:"Ontem",previous7days:"\xDAltimos 7 dias",previous30days:"\xDAltimos 30 dias",daysago:"dias atr\xE1s"},hu:{recentNotes:"Legut\xF3bbi jegyzetek",pinned:"Kit\u0171zve",deleteFile:"F\xE1jl t\xF6rl\xE9se",areYouSureDelete:'Biztos, hogy t\xF6r\xF6lni akarod ezt: "{filename}"?',delete:"T\xF6rl\xE9s",cancel:"M\xE9gsem",open:"Megnyit\xE1s",openInNewTab:"Megnyit\xE1s \xFAj lapon",moveToPrevious:"Ugr\xE1s az el\u0151z\u0151 jegyzetre",moveToNext:"Ugr\xE1s az k\xF6vetkez\u0151 jegyzetre",today:"Ma",yesterday:"Tegnap",previous7days:"Utols\xF3 7 nap",previous30days:"Utols\xF3 30 nap",daysago:"napja"}},U=()=>{var F;return((F=localStorage.getItem("language"))==null?void 0:F.toLowerCase())||"en"};function B(F){return U()}function x(F,T){let e=B(F);return L[e]&&L[e][T]?L[e][T]:L.en[T]}var M="recent-notes-view",C=class extends r.ItemView{constructor(e,t){super(e);this.refreshTimeout=null;this.lastActiveFile=null;this.firstLineCache=new Map;this.MAX_FILE_SIZE_FOR_PREVIEW=100*1024;this.CACHE_DURATION=5*60*1e3;this.lastEditedFile=null;this.currentFileIndex=-1;this.debouncedRefresh=()=>{this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.refreshView(),this.refreshTimeout=null},20)};this.plugin=t,this.containerEl.addClass("recent-notes-view")}moveToAdjacentNote(e){let t=this.getRecentFiles();if(t.length===0)return;let i=this.app.workspace.getActiveFile();if(!i){let c=e==="up"?t[t.length-1]:t[0];this.openFile(c);return}let o=t.findIndex(c=>c.path===i.path);if(o===-1){let c=e==="up"?t[t.length-1]:t[0];this.openFile(c);return}let n=e==="up"?o-1:o+1;n<0||(n>=t.length&&(n=0),this.openFile(t[n]))}getModifiedTime(e,t=!1){if(!t&&C.fileModifiedTimes.has(e)){let o=C.fileModifiedTimes.get(e);return o!==void 0?o:e.stat.mtime}if(C.fileModifiedTimes.set(e,e.stat.mtime),this.plugin.settings.propertyModified){let o=this.app.vault.getAbstractFileByPath(e.path);if(o instanceof r.TFile){let n=this.app.metadataCache.getFileCache(o);if(n&&n.frontmatter){let c=new Date(n.frontmatter[this.plugin.settings.propertyModified]).getTime();c&&C.fileModifiedTimes.set(e,c)}}}let i=C.fileModifiedTimes.get(e);return i!==void 0?i:e.stat.mtime}getRecentFiles(){let e=this.app.vault.getFiles().filter(o=>this.shouldRefreshForFile(o)),t=e.filter(o=>this.plugin.settings.pinnedNotes.includes(o.path)).sort((o,n)=>this.getModifiedTime(n,!0)-this.getModifiedTime(o,!0)),i=e.filter(o=>!this.plugin.settings.pinnedNotes.includes(o.path)).sort((o,n)=>this.getModifiedTime(n,!0)-this.getModifiedTime(o,!0)).slice(0,this.plugin.settings.maxNotesToShow-t.length);return[...t,...i]}async openFile(e){let t=this.app.workspace.getMostRecentLeaf();t&&await t.openFile(e)}clearOldCache(){let e=Date.now();for(let[t,i]of this.firstLineCache.entries())e-i.timestamp>this.CACHE_DURATION&&this.firstLineCache.delete(t)}shouldRefreshForFile(e){if(!e)return!1;let t=e.path.toLowerCase();if(this.plugin.settings.excludedFolders.some(c=>{let g=c.toLowerCase().trim();return g&&t.startsWith(g+"/")})||this.plugin.settings.excludedFiles.some(c=>{let g=c.toLowerCase().trim();return g&&t===g}))return!1;if(this.plugin.settings.excludedTags.length>0){let c=this.app.metadataCache.getFileCache(e);if(c){let g=(0,r.getAllTags)(c);if(g&&g.length>0){let f=this.plugin.settings.excludedTags.map(u=>u.trim()).filter(u=>u.length>0).map(u=>u.toLowerCase());if(g.some(u=>{let E=u.toLowerCase();return f.includes(E)}))return!1}}}let n=e.extension.toLowerCase();return this.plugin.settings.showMarkdownFiles&&n==="md"||this.plugin.settings.showImageFiles&&["png","jpg","jpeg","gif","bmp","svg"].includes(n)||this.plugin.settings.showPDFFiles&&n==="pdf"||this.plugin.settings.showAudioFiles&&["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(n)||this.plugin.settings.showVideoFiles&&["mp4","webm","ogv","mov","mkv"].includes(n)||this.plugin.settings.showCanvasFiles&&n==="canvas"||this.plugin.settings.showCSVFiles&&n==="csv"||this.plugin.settings.showBaseFiles&&n==="base"}clearCache(){this.firstLineCache.clear()}getViewType(){return M}getDisplayText(){return this.plugin.translate("recentNotes")}getIcon(){return"clock-10"}cleanMarkdownFormatting(e){return e=e.replace(/^#+\s+/g,""),e=e.replace(/[*_]{1,3}([^*_]+)[*_]{1,3}/g,"$1"),e=e.replace(/~~([^~]+)~~/g,"$1"),e=e.replace(/^[-*_]{3,}\s*$/g,""),e=e.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),e=e.replace(/`+/g,""),e=e.replace(/^>\s+/g,""),e=e.replace(/^- \[[x ]\]\s+/i,""),e=e.replace(/^[-*+]\s+/g,""),e=e.replace(/^\d+\.\s+/g,""),e=e.replace(/https?:\/\//g,""),e=e.replace(/www\./g,""),e.trim()}async getFirstLineOfFile(e){var o,n,c,g;let t=e.extension.toLowerCase();if(t!=="md"){let f=e.stat.size,d="";if(f<1024?d=`${f} B`:f<1024*1024?d=`${(f/1024).toFixed(1)} KB`:d=`${(f/(1024*1024)).toFixed(1)} MB`,["png","jpg","jpeg","gif","bmp","svg"].includes(t))return`Image file \u2022 ${d}`;if(t==="pdf")return`PDF document \u2022 ${d}`;if(["mp3","wav","m4a","ogg","3gp","flac","webm","aac"].includes(t))return`Audio file \u2022 ${d}`;if(["mp4","webm","ogv","mov","mkv"].includes(t))return`Video file \u2022 ${d}`;if(t==="canvas")return"Canvas file";if(t==="csv"){if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return`CSV file \u2022 ${d}`;let u=this.firstLineCache.get(e.path);if(u&&Date.now()-u.timestamp<this.CACHE_DURATION)return u.line;try{let s=(o=(await this.app.vault.cachedRead(e)).split(`
`)[0])==null?void 0:o.trim();if(s){let p=`CSV \u2022 ${s.length>50?s.slice(0,47)+"...":s} \u2022 ${d}`;return this.firstLineCache.set(e.path,{line:p,timestamp:Date.now()}),p}return`CSV file \u2022 ${d}`}catch(E){return`CSV file \u2022 ${d}`}}else if(t==="base")return`Base file \u2022 ${d}`;return`${t.toUpperCase()} file \u2022 ${d}`}if(e.stat.size>this.MAX_FILE_SIZE_FOR_PREVIEW)return"Large markdown file";let i=this.firstLineCache.get(e.path);if(i&&Date.now()-i.timestamp<this.CACHE_DURATION)return i.line;try{let d=(await this.app.vault.cachedRead(e)).split(`
`),u=0;if(((n=d[0])==null?void 0:n.trim())==="---"){for(let s=1;s<d.length;s++)if(((c=d[s])==null?void 0:c.trim())==="---"){u=s+1;break}}let E=[];for(let s=u;s<d.length&&E.length<this.plugin.settings.previewLines;s++){let a=(g=d[s])==null?void 0:g.trim();if(a&&a!=="---"){let p=this.cleanMarkdownFormatting(a);p&&E.push(p)}}if(E.length>0){let s=E.join(`
`);return this.firstLineCache.set(e.path,{line:s,timestamp:Date.now()}),s}return"No additional text"}catch(f){return"Error reading file"}}getTimeSection(e){let t=(0,h.moment)();if(e.isSame(t,"day"))return this.plugin.translate("today");if(e.isSame(t.clone().subtract(1,"day"),"day"))return this.plugin.translate("yesterday");if(e.isAfter(t.clone().subtract(7,"days")))return this.plugin.translate("previous7days");if(e.isAfter(t.clone().subtract(30,"days")))return this.plugin.translate("previous30days");if(e.isSame(t,"year")){let i=e.format("MMMM");return i.charAt(0).toUpperCase()+i.slice(1)}return e.format("YYYY")}scrollToTodaySection(){let e=this.containerEl.children[1],t=Array.from(e.querySelectorAll("h6"));for(let i of t)if(i.textContent==="Today"){e.scrollTop>300&&i.scrollIntoView({behavior:"smooth",block:"start"});break}}async refreshView(){var s;let e=this.containerEl.children[1],t=e.scrollTop;e.empty(),document.body.setAttribute("data-recent-notes-density",this.plugin.settings.density);let i=this.app.vault.getFiles().filter(a=>this.shouldRefreshForFile(a)),o=i.filter(a=>this.plugin.settings.pinnedNotes.includes(a.path)).sort((a,p)=>this.getModifiedTime(p,!0)-this.getModifiedTime(a,!0)),n=i.filter(a=>!this.plugin.settings.pinnedNotes.includes(a.path)).sort((a,p)=>this.getModifiedTime(p,!0)-this.getModifiedTime(a,!0)).slice(0,this.plugin.settings.maxNotesToShow-o.length),c=[...o,...n],g="",f=this.app.workspace.getActiveFile(),d=this.lastEditedFile&&((s=c[0])==null?void 0:s.path)===this.lastEditedFile,u=c[0]&&this.plugin.settings.pinnedNotes.includes(c[0].path);f&&(this.lastActiveFile=f.path);let E=f?f.path:this.lastActiveFile;if(o.length>0){let a=e.createEl("h6"),p=a.createSpan({cls:"pin-icon-small"});(0,r.setIcon)(p,"pin"),a.createSpan({text:this.plugin.translate("pinned")});for(let l of o){let m=e.createEl("div",{cls:`recent-note-item ${E===l.path?"is-active":""}`}),v=(0,h.moment)(),w;if((0,h.moment)(this.getModifiedTime(l,!0)).isSame(v,"day")||(0,h.moment)(this.getModifiedTime(l,!0)).isSame(v.clone().subtract(1,"day"),"day"))w=(0,h.moment)(this.getModifiedTime(l)).format("HH:mm");else if((0,h.moment)(this.getModifiedTime(l)).isAfter(v.clone().subtract(7,"days")))if(this.plugin.settings.dateFormat==="RELATIVE"){let y=v.diff((0,h.moment)(this.getModifiedTime(l)),"days");w=y===0?this.plugin.translate("today"):y===1?this.plugin.translate("yesterday"):`${y} ${this.plugin.translate("daysago")}`}else w=(0,h.moment)(this.getModifiedTime(l)).format("dddd");else this.plugin.settings.dateFormat==="RELATIVE"?w=`${v.diff((0,h.moment)(this.getModifiedTime(l)),"days")} ${this.plugin.translate("daysago")}`:w=(0,h.moment)(this.getModifiedTime(l)).format(this.plugin.settings.dateFormat);if(this.plugin.settings.density==="compact"&&this.plugin.settings.showTime){let y=m.createEl("div",{cls:"recent-note-header"});if(y.createEl("div",{text:this.getFileDisplayName(l),cls:"recent-note-title"}),y.createEl("span",{text:w,cls:"recent-note-date"}),this.plugin.settings.previewLines>0){let b=this.plugin.settings.previewLines>1,N=await this.getFirstLineOfFile(l),S=m.createEl("div",{cls:`recent-note-preview ${b?"has-multiple-lines":""}`});N.split(`
`).forEach(D=>{S.createEl("div",{text:D,cls:"recent-note-preview-line"})})}}else{let y=m.createEl("div",{text:this.getFileDisplayName(l),cls:"recent-note-title"}),b=this.plugin.settings.previewLines>1,N=m.createEl("div",{cls:`recent-note-info ${b?"has-multiple-lines":""}`});if(this.plugin.settings.previewLines>0){let S=await this.getFirstLineOfFile(l),D=N.createEl("div",{cls:`recent-note-preview ${b?"has-multiple-lines":""}`});S.split(`
`).forEach(P=>{D.createEl("div",{text:P,cls:"recent-note-preview-line"})})}if(this.plugin.settings.showTime){let S=N.createEl("span",{text:w,cls:this.plugin.settings.previewLines>0&&b?"recent-note-date recent-note-date-below":"recent-note-date"})}}this.addFileItemEventListeners(m,l)}g=""}for(let a of n){let p=(0,h.moment)(this.getModifiedTime(a,!0)),l=this.getTimeSection(p);l!==g&&(g=l,e.createEl("h6",{text:l}));let m=e.createEl("div",{cls:`recent-note-item ${E===a.path?"is-active":""}`}),v=(0,h.moment)(),w;if((0,h.moment)(this.getModifiedTime(a,!0)).isSame(v,"day")||(0,h.moment)(this.getModifiedTime(a,!0)).isSame(v.clone().subtract(1,"day"),"day"))w=(0,h.moment)(this.getModifiedTime(a)).format("HH:mm");else if((0,h.moment)(this.getModifiedTime(a)).isAfter(v.clone().subtract(7,"days")))if(this.plugin.settings.dateFormat==="RELATIVE"){let y=v.diff((0,h.moment)(this.getModifiedTime(a)),"days");w=y===0?this.plugin.translate("today"):y===1?this.plugin.translate("yesterday"):`${y} ${this.plugin.translate("daysago")}`}else w=(0,h.moment)(this.getModifiedTime(a)).format("dddd");else this.plugin.settings.dateFormat==="RELATIVE"?w=`${v.diff((0,h.moment)(this.getModifiedTime(a)),"days")} ${this.plugin.translate("daysago")}`:w=(0,h.moment)(this.getModifiedTime(a)).format(this.plugin.settings.dateFormat);if(this.plugin.settings.density==="compact"&&this.plugin.settings.showTime){let y=m.createEl("div",{cls:"recent-note-header"});if(y.createEl("div",{text:this.getFileDisplayName(a),cls:"recent-note-title"}),y.createEl("span",{text:w,cls:"recent-note-date"}),this.plugin.settings.previewLines>0){let b=this.plugin.settings.previewLines>1,N=await this.getFirstLineOfFile(a),S=m.createEl("div",{cls:`recent-note-preview ${b?"has-multiple-lines":""}`});N.split(`
`).forEach(D=>{S.createEl("div",{text:D,cls:"recent-note-preview-line"})})}}else{let y=m.createEl("div",{text:this.getFileDisplayName(a),cls:"recent-note-title"}),b=this.plugin.settings.previewLines>1,N=m.createEl("div",{cls:`recent-note-info ${b?"has-multiple-lines":""}`});if(this.plugin.settings.previewLines>0){let S=await this.getFirstLineOfFile(a),D=N.createEl("div",{cls:`recent-note-preview ${b?"has-multiple-lines":""}`});S.split(`
`).forEach(P=>{D.createEl("div",{text:P,cls:"recent-note-preview-line"})})}if(this.plugin.settings.showTime){let S=N.createEl("span",{text:w,cls:this.plugin.settings.previewLines>0&&b?"recent-note-date recent-note-date-below":"recent-note-date"})}}this.addFileItemEventListeners(m,a)}d&&!u?this.scrollToTodaySection():e.scrollTop=t,this.lastEditedFile=null}addFileItemEventListeners(e,t){let i=0,o=!1,n=0,c=0,g=0,f=!1,d=s=>{s.preventDefault(),s.stopPropagation()},u=s=>{s.preventDefault(),s.stopPropagation()},E=()=>{window.removeEventListener("click",d,!0),window.removeEventListener("contextmenu",u,!0),window.addEventListener("click",d,!0),window.addEventListener("contextmenu",u,!0),setTimeout(()=>{window.removeEventListener("click",d,!0),window.removeEventListener("contextmenu",u,!0)},1e3)};e.addEventListener("touchstart",s=>{Date.now()-n<1e3||(o=!0,i=Date.now(),s.touches.length>0&&(c=s.touches[0].clientY,g=s.touches[0].clientX),f=!1)}),e.addEventListener("touchmove",s=>{if(s.touches.length>0){let a=Math.abs(s.touches[0].clientY-c),p=Math.abs(s.touches[0].clientX-g);(a>10||p>10)&&(f=!0)}}),e.addEventListener("touchend",async s=>{if(Date.now()-n<1e3||f)return;if(Date.now()-i<500)s.preventDefault(),s.stopPropagation(),await this.app.workspace.getLeaf(!1).openFile(t),n=Date.now(),t.extension!=="md"&&setTimeout(()=>{this.debouncedRefresh()},50),E();else{s.preventDefault(),s.stopPropagation();let p=s.changedTouches[0],l=new r.Menu;l.addItem(v=>{v.setIcon("open-elsewhere-glyph").setTitle(this.plugin.translate("openInNewTab")).onClick(async()=>{await this.app.workspace.getLeaf(!0).openFile(t),E()})});let m=this.plugin.settings.pinnedNotes.includes(t.path);l.addItem(v=>{v.setIcon(m?"pin-off":"pin").setTitle(m?"Unpin":"Pin").onClick(async()=>{m?this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(w=>w!==t.path):this.plugin.settings.pinnedNotes.push(t.path),await this.plugin.saveSettings(),this.refreshView()})}),l.addItem(v=>{v.setIcon("trash").setTitle("Delete").onClick(async()=>{if(!await this.app.vault.adapter.exists(t.path))return;new I(this.app,t.path,async()=>{await this.app.fileManager.trashFile(t),this.refreshView()}).open()})}),l.addSeparator(),this.app.workspace.trigger("file-menu",l,t,"recent-notes-view",null),l.showAtPosition({x:p.clientX,y:p.clientY})}}),e.addEventListener("mousedown",async s=>{if(o||s.button!==0&&s.button!==1)return;s.preventDefault(),s.stopPropagation();let a=s.button===1||s.metaKey||s.ctrlKey;await this.app.workspace.getLeaf(a).openFile(t),t.extension!=="md"&&setTimeout(()=>{this.debouncedRefresh()},50)}),e.addEventListener("mouseover",s=>{t!=null&&t.path&&this.app.workspace.trigger("hover-link",{event:s,source:M,hoverParent:this.containerEl,targetEl:e,linktext:t.path})}),e.addEventListener("contextmenu",s=>{if(o||Date.now()-n<1e3){f||(s.preventDefault(),s.stopPropagation());return}s.preventDefault();let a=new r.Menu;a.addItem(l=>{l.setIcon("open-elsewhere-glyph").setTitle(this.plugin.translate("openInNewTab")).onClick(async()=>{await this.app.workspace.getLeaf(!0).openFile(t),E()})});let p=this.plugin.settings.pinnedNotes.includes(t.path);a.addItem(l=>{l.setIcon(p?"pin-off":"pin").setTitle(p?"Unpin":"Pin").onClick(async()=>{p?this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(m=>m!==t.path):this.plugin.settings.pinnedNotes.push(t.path),await this.plugin.saveSettings(),this.refreshView()})}),a.addItem(l=>{l.setIcon("trash").setTitle("Delete").onClick(async()=>{if(!await this.app.vault.adapter.exists(t.path))return;new I(this.app,t.path,async()=>{await this.app.fileManager.trashFile(t),this.refreshView()}).open()})}),a.addSeparator(),this.app.workspace.trigger("file-menu",a,t,"recent-notes-view",null),a.showAtPosition({x:s.clientX,y:s.clientY})})}async onOpen(){this.registerInterval(window.setInterval(()=>this.clearOldCache(),this.CACHE_DURATION)),document.body.setAttribute("data-recent-notes-density",this.plugin.settings.density),await this.refreshView(),this.registerEvent(this.app.vault.on("modify",e=>{e instanceof r.TFile&&(this.firstLineCache.delete(e.path),this.lastEditedFile=e.path);let t=this.app.workspace.getActiveFile();this.shouldRefreshForFile(t)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("create",e=>{e instanceof r.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("delete",e=>{e instanceof r.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.vault.on("rename",e=>{e instanceof r.TFile&&this.shouldRefreshForFile(e)&&this.debouncedRefresh()})),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{let e=this.app.workspace.getActiveFile();this.shouldRefreshForFile(e)&&this.debouncedRefresh()}))}async onClose(){this.refreshTimeout&&clearTimeout(this.refreshTimeout),document.body.removeAttribute("data-recent-notes-density")}getFileDisplayName(e){if(e.extension!=="md")return e.basename;let t=this.app.metadataCache.getFileCache(e);return t&&t.frontmatter&&t.frontmatter.title?t.frontmatter.title:e.basename}},A=C;A.fileModifiedTimes=new Map;var I=class extends r.Modal{constructor(e,t,i){super(e);this.filename=t;this.onConfirm=i}onOpen(){let{contentEl:e,titleEl:t}=this;t.setText(x(this.app,"deleteFile")),e.createEl("p").setText(x(this.app,"areYouSureDelete").replace("{filename}",this.filename));let i=e.createDiv({cls:"modal-button-container"});i.createEl("button",{cls:"mod-warning",text:x(this.app,"delete")}).addEventListener("click",()=>{this.onConfirm(),this.close()}),i.createEl("button",{text:x(this.app,"cancel")}).addEventListener("click",()=>{this.close()})}onClose(){let{contentEl:e}=this;e.empty()}},V=class extends r.Plugin{async onload(){await this.loadSettings(),this.registerView(M,e=>this.view=new A(e,this)),this.app.workspace.trigger("parse-style-settings"),this.addRibbonIcon("clock-10",this.translate("recentNotes"),()=>{this.activateView()}),this.addCommand({id:"show-recent-notes",name:this.translate("open"),callback:()=>{this.activateView()}}),this.addCommand({id:"move-to-previous-recent-note",name:this.translate("moveToPrevious"),callback:()=>{this.view&&this.view.moveToAdjacentNote("up")}}),this.addCommand({id:"move-to-next-recent-note",name:this.translate("moveToNext"),callback:()=>{this.view&&this.view.moveToAdjacentNote("down")}}),this.addSettingTab(new Y(this.app,this))}async activateView(){let{workspace:e}=this.app,t=e.getLeavesOfType(M)[0];t||(t=e.getLeftLeaf(!1),t&&await t.setViewState({type:M,active:!0})),t&&e.revealLeaf(t)}async loadSettings(){this.settings=Object.assign({},H,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}translate(e){return x(this.app,e)}},Y=class extends r.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new r.Setting(e).setName("Date format").setDesc("Format for displaying dates older than 7 days").addDropdown(t=>t.addOption("RELATIVE","X days ago (relative)").addOption("DD/MM/YYYY","19/08/2025").addOption("M/D/YY","8/19/25").addOption("D/M/YY","19/8/25").addOption("M/D/YYYY","8/19/2025").addOption("DD.MM.YYYY","19.08.2025").addOption("DD-MM-YYYY","19-08-2025").addOption("YYYY/M/D","2025/8/19").addOption("YYYY.MM.DD","2025.08.19").addOption("YYYY-MM-DD","2025-08-19").setValue(this.plugin.settings.dateFormat).onChange(async i=>{this.plugin.settings.dateFormat=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Maximum notes to show").setDesc("How many recent notes to display in the view").addText(t=>t.setPlaceholder("100").setValue(this.plugin.settings.maxNotesToShow.toString()).onChange(async i=>{let o=parseInt(i);isNaN(o)||(this.plugin.settings.maxNotesToShow=o,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView())})),new r.Setting(e).setName("Preview lines").setDesc("Number of text lines to show in the preview (0-3)").addDropdown(t=>t.addOption("0","No preview").addOption("1","1 line").addOption("2","2 lines").addOption("3","3 lines").setValue(this.plugin.settings.previewLines.toString()).onChange(async i=>{this.plugin.settings.previewLines=parseInt(i),await this.plugin.saveSettings(),this.plugin.view&&(this.plugin.view.clearCache(),await this.plugin.view.refreshView())})),new r.Setting(e).setName("Show time").setDesc("Show modification time next to files (set both this and Preview lines to 0 for minimal view)").addToggle(t=>t.setValue(this.plugin.settings.showTime).onChange(async i=>{this.plugin.settings.showTime=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName(this.plugin.translate("density")).setDesc(this.plugin.translate("densityDesc")).addDropdown(t=>t.addOption("comfortable",this.plugin.translate("comfortable")).addOption("compact",this.plugin.translate("compact")).setValue(this.plugin.settings.density).onChange(async i=>{this.plugin.settings.density=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Excluded folders").setDesc("List of folders to exclude from recent files (one per line)").addTextArea(t=>t.setPlaceholder(`folder1
folder2/subfolder`).setValue(this.plugin.settings.excludedFolders.join(`
`)).onChange(async i=>{let o=i.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);this.plugin.settings.excludedFolders=o,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Excluded files").setDesc("List of specific files to exclude from recent files (one per line, full path required)").addTextArea(t=>t.setPlaceholder(`folder1/note.md
folder2/image.png`).setValue(this.plugin.settings.excludedFiles.join(`
`)).onChange(async i=>{let o=i.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);this.plugin.settings.excludedFiles=o,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Excluded tags").setDesc("List of tags to exclude from recent files (one per line)").addTextArea(t=>t.setPlaceholder(`#archive
#private`).setValue(this.plugin.settings.excludedTags.join(`
`)).onChange(async i=>{let o=i.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);this.plugin.settings.excludedTags=o,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Custom Modified Date property").setDesc("Specify a frontmatter property to use for modification date (leave empty to use file modification date)").addText(t=>t.setPlaceholder("modified").setValue(this.plugin.settings.propertyModified.toString()).onChange(async i=>{this.plugin.settings.propertyModified=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),e.createEl("h3",{text:"File types to show"}),new r.Setting(e).setName("Show Markdown files").setDesc("Show .md files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showMarkdownFiles).onChange(async i=>{this.plugin.settings.showMarkdownFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show Image files").setDesc("Show image files (png, jpg, gif, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showImageFiles).onChange(async i=>{this.plugin.settings.showImageFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show PDF files").setDesc("Show .pdf files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showPDFFiles).onChange(async i=>{this.plugin.settings.showPDFFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show Audio files").setDesc("Show audio files (mp3, wav, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showAudioFiles).onChange(async i=>{this.plugin.settings.showAudioFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show Video files").setDesc("Show video files (mp4, webm, etc.) in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showVideoFiles).onChange(async i=>{this.plugin.settings.showVideoFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show Canvas files").setDesc("Show .canvas files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCanvasFiles).onChange(async i=>{this.plugin.settings.showCanvasFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show CSV files").setDesc("Show .csv files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showCSVFiles).onChange(async i=>{this.plugin.settings.showCSVFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()})),new r.Setting(e).setName("Show Base files").setDesc("Show .base files in the recent list").addToggle(t=>t.setValue(this.plugin.settings.showBaseFiles).onChange(async i=>{this.plugin.settings.showBaseFiles=i,await this.plugin.saveSettings(),this.plugin.view&&await this.plugin.view.refreshView()}))}};

/* nosourcemap */